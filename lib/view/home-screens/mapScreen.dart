import 'package:flutter/material.dart';
import 'package:flutter/services.dart';
import 'package:google_maps_flutter/google_maps_flutter.dart';
import '../../utils/app_colors.dart';
import '../../utils/utils.dart';

const LatLng currentLocation = LatLng(24.630160,46.752530);
class MapScreen extends StatefulWidget {
  const MapScreen({super.key});

  @override
  State<MapScreen> createState() => _MapScreenState();
}

class _MapScreenState extends State<MapScreen> {
  late GoogleMapController  mapController;
  Map<String,Marker> _markers = {};
  addMarker(String id,LatLng location)async{
     var url = 'data:image/jpeg;base64,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';




   var bytes = (await NetworkAssetBundle(Uri.parse(url)).load(url)).buffer.asUint8List();
    var marker = Marker(
      markerId: MarkerId(id),
      position: location,
      infoWindow: const InfoWindow(
        title: 'Title of place ',
        snippet: 'description of place ',
      ),
      icon:BitmapDescriptor.fromBytes(bytes),

    );





    _markers[id] = marker;
    setState(() {
      
    });
   
  }
  @override
  Widget build(BuildContext context) {
    return Scaffold(

      appBar:AppBar(
        backgroundColor: AppColors.black,
        foregroundColor: AppColors.white,
          leading: IconButton(onPressed: (){
            pop(context);
          },
          icon:const Icon(Icons.arrow_back_ios)),
      ),
      body: GoogleMap(
          initialCameraPosition: const CameraPosition(target: currentLocation, zoom:13,),
         onMapCreated :(controller){
          mapController = controller;
          addMarker("test ",currentLocation);
         },
          markers: _markers.values.toSet(),
          
          ),
    );
  }
}
